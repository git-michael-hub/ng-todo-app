<div class="tw-py-[32px]">
  <form
    [formGroup]="form"
    class="example-form tw-flex tw-flex-col tw-justify-center tw-items-center tw-px-[12rem]"
  >

    <!-- Remove Google input suggestion. Dummy fields. -->
    <input type="text" style="display:none" autocomplete="username">
    <input type="password" style="display:none" autocomplete="new-password">


    <mat-form-field class="example-full-width tw-w-full tw-py-[10px]">
      <mat-label>Email</mat-label>
      <input type="email" matInput formControlName="email">
      @if (emailFormControl.hasError('email') && !emailFormControl.hasError('required')) {
        <mat-error>Please enter a valid email address</mat-error>
      }
      @if (emailFormControl.hasError('required')) {
        <mat-error>Email is <strong>required</strong></mat-error>
      }

      @if (emailFormControl.value) {
        <button matSuffix matIconButton aria-label="Clear"
          (click)="clearEmail($event)">
          <mat-icon class="tw-text-[#000] tw-mx-[14px]">close</mat-icon>
        </button>
      }
    </mat-form-field>

    <mat-form-field class="example-full-width tw-w-full tw-py-[10px]">
      <mat-label>Password</mat-label>
      <input #password type="password" matInput formControlName="password">
      @if (passwordFormControl.hasError('required')) {
        <mat-error>Password is <strong>required</strong></mat-error>
      }

      @if (passwordFormControl.value) {
        <button matSuffix matIconButton
          (click)="togglePasswordVisibility(password, $event)"
        >
          <mat-icon class="tw-text-[#000] tw-mx-[14px]">
            {{
              psVisibility()
                ? 'visibility'
                : 'visibility_off'
            }}
          </mat-icon>
        </button>
      }

    </mat-form-field>

    <div class="tw-flex tw-justify-between tw-items-center tw-w-full tw-py-[4px]">
      <mat-checkbox class="tw-text-sm">Remember me</mat-checkbox>
      <span class="tw-text-sm">Forgot Password?</span>
    </div>

    <div class="tw-w-full tw-py-[10px] tw-h-[72px] tw-flex tw-items-center tw-justify-center">
      <!-- Message error -->
       @if (error) {
        <span class="tw-text-red-600">{{ error?.error?.message }}</span>
       }
    </div>

    <div class="tw-w-full tw-py-[10px]">
      <button
        (click)="login()"
        mat-flat-button class="tw-w-full"
        [disabled]="form.invalid || error || isLogging()"
      >
        <span>
          @if (isLogging() && !error) {
            Logging in...
          }
          @else {
            Login
          }
        </span>
      </button>
    </div>

    <div class="tw-text-sm tw-py-[10px]">
      <span>No account yet? Register here</span>
    </div>


  </form>
</div>
